<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, height=device-height, width=device-width">
    <title>AGScore.se</title>
    
    <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="icon" href="images/favicon.ico">
    <link rel="stylesheet" type="text/css" href="vendor/font-awesome/css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="vendor/open-sans/open-sans.css" />
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="vendor/mobility/mobility.css" />
	<link rel="stylesheet" type="text/css" href="vendor/dynatable/jquery.dynatable.css" /> 
	<link rel="stylesheet" type="text/css" href="vendor/stacktable/stacktable.css" />
<link rel="stylesheet" href="vendor/easy-autocomplete/easy-autocomplete.min.css" /> 
<link rel="stylesheet" href="vendor/editablegrid/editablegrid.css" /> 

	<link rel="stylesheet" type="text/css" href="vendor/agscore/agscore.css" />
    
    <!--<script type="text/javascript" src="cordova.js"></script>-->
	<script type="text/javascript" src="vendor/jquery/jquery-1.12.3.min.js"></script>
    <script type="text/javascript" src="vendor/classified/classified.js"></script>
	<script type="text/javascript" src="vendor/doon/doon.js"></script>
	<script type="text/javascript" src="vendor/time/time.js"></script>
    <script type="text/javascript" src="vendor/mobility/mobility.js"></script>
    <script type="text/javascript" src="vendor/acquire/acquire.js"></script>
    <script type="text/javascript" src="vendor/handlebars/handlebars.js"></script>
	<script type="text/javascript" src="vendor/chops/chops.js"></script>
    <script type="text/javascript" src="vendor/cropper/cropper.js"></script>
    <script type="text/javascript" src="vendor/password/password.js"></script>
	<script type="text/javascript" src="vendor/dynatable/jquery.dynatable.js"></script>
	<script src="vendor/stacktable/stacktable.js" type="text/javascript"></script>
    <script src="vendor/easy-autocomplete/jquery.easy-autocomplete.js"></script>
                <script src="vendor/editablegrid/editablegrid.js"></script>
                <!-- [DO NOT DEPLOY] --> <script src="vendor/editablegrid/editablegrid_renderers.js" ></script>
                <!-- [DO NOT DEPLOY] --> <script src="vendor/editablegrid/editablegrid_editors.js" ></script>
                <!-- [DO NOT DEPLOY] --> <script src="vendor/editablegrid/editablegrid_validators.js" ></script>
                <!-- [DO NOT DEPLOY] --> <script src="vendor/editablegrid/editablegrid_utils.js" ></script>
                <!-- [DO NOT DEPLOY] --> <script src="vendor/editablegrid/editablegrid_charts.js" ></script>
	<script src="vendor/htmlhttpauth/httpauth.js"></script>
	<script src="vendor/agscore/agscore.js"></script>
</head>
<body>
	<section class="screen current"></section>
    
    <footer class="foot">
        <nav class="foot-nav" data-do="foot-nav">
            <a class="foot-nav-item" href=".">
                <i class="foot-nav-icon fa fa-home"></i>
                <span class="foot-nav-label">Home</span>
            </a>
	<a class="foot-nav-item" data-do="modal-open" data-on="click" href="#menu">
		<div id=footid><i class="foot-nav-icon fa fa-bars"></i></div>
	</a>
            <a class="foot-nav-item" data-do="modal-open" data-on="click" href="#profile">
                <i class="foot-nav-icon fa fa-user"></i>
                <span id="user" class="foot-nav-label">User</span>
            </a>
<!--            <a class="foot-nav-item" data-do="modal-open" data-on="click" href="#modal">
                <i class="foot-nav-icon fa fa-cog"></i>
                <span class="foot-nav-label">Settings</span>
            </a>
-->
        </nav>
    </footer>
   

    <div id="upload" class="modal hide">
        <header class="head">
            <a class="head-link pull-right" href="#upload" data-do="modal-close" data-on="click">
                <i class="fa fa-times"></i>
            </a>
            <h1 id=upload_title class="title">Upload</h1>
        </header>
        <section class="body with-head">
		<p class="pad">
                        <div class="focus">
			<div id="upload_text">Upload</div>
			</div>
<div class="focus focus-group">
	<input id="upload_input" type="file" class="form-control" onchange="uploadFile('gymnast','new','#upload_preview')"><br>
    </div>
<div class="focus focus-group">
<div class="profile-userpic">
	<img id="upload_preview" src="images/blank.gif" alt="">
</div>
	<center><a href="javascript:$.mobility.modalClose('#upload');"><i class="fa fa-arrow-down fa-2x">Done</i></a></center>
    </div>
</div>
		</p>
        </section>
    </div>

 
    <div id="modal" class="modal hide">
        <header class="head">
            <a class="head-link pull-right" href="#modal" data-do="modal-close" data-on="click">
                <i class="fa fa-times"></i>
            </a>
            <h1 class="title">Settings</h1>
        </header>
    
        <section class="body with-head">
            <p class="pad">
			<div class="focus">
</div>
<h4 class="pad upper">Themes</h4>

                        <nav class="themes nav-list">
                <a href="javascript:void(0)">Blue</a>
                <a href="javascript:void(0)">Green</a>
                <a href="javascript:void(0)">Orange</a>
                <a href="javascript:void(0)">Pink</a>
                <a href="javascript:void(0)">Purple</a>
                <a href="javascript:void(0)">Red</a>

			</p>
        </section>

    </div>
    
    <div id="favorites" class="modal hide">
        <header class="head">
            <a class="head-link pull-right" href="#favorites" data-do="modal-close" data-on="click">
                <i class="fa fa-times"></i>
            </a>
            <h1 class="title">Favorites</h1>
        </header>
    
        <section class="body with-head">
            <nav class="nav-list">
                <a data-do="go-forward" data-on="click" href="#typography">Typography <i class="fa fa-plus"></i></a>
                <a data-do="go-forward" data-on="click" href="#tabs">Tabs <i class="fa fa-edit"></i></a>
                <a data-do="go-forward" data-on="click" href="#fields">Fields <i class="fa fa-chevron-right"></i><span class="badge">42</span></a>
                <a data-do="go-forward" data-on="click" href="#list">List <i class="fa fa-chevron-right"></i></a>
            </nav>
        </section>
    </div>

      <div id="gymnastinfo" class="modal-sm modal hide">
        <header class="head">
            <a class="head-link pull-right" href="#gymnastinfo" data-do="modal-close" data-on="click">
                <i class="fa fa-times"></i>
            </a>
            <h1 id="gymnasttitle" class="title">None</h1>
        </header>
  
        <section class="body with-head">
		<div id="gymnastabout"></div>
        </section>
    </div>
  
    <div id="profile" class="modal hide">
        <header class="head">
            <a class="head-link pull-right" href="#profile" data-do="modal-close" data-on="click">
                <i class="fa fa-times"></i>
            </a>
            <h1 class="title">User</h1>
        </header>
    
        <section class="body with-head">
            <div class="row pad">
                <div class="col-md-1 middle">
                    <i class="fa fa-user fa-5x"></i> 
                </div>
				<div class="login">
                <div class="col-md-11">
		<!--
                    <div class="focus">
                        <label>Username</label>
                        <input name="username" id="basic-username" type="text" class="form-control" placeholder="Enter Username" value="" />
                    </div>
                    <div class="focus">
                        <label>Password</label>
                        <input name="password" id="basic-password" type="password" class="form-control" placeholder="Enter Password" />
                    </div       
		-->
		<a class="httpauth" id="basic" href="/ES/">Log in with Basic Auth</a>
                </div>
				<div>
            </div>
        </section>
    </div>
    
    <div id="popover" 
    	class="popover hide" 
        data-do="popover-close" 
        data-on="click" 
        data-target="#popover">
        <nav class="nav-list">
            <a data-do="go-forward" data-on="click" href="#typography">Typography</a>
            <a data-do="go-forward" data-on="click" href="#tabs">Tabs</a>
            <a data-do="go-forward" data-on="click" href="#fields">Fields</a>
            <a data-do="go-forward" data-on="click" href="#list">List</a>
            <a data-do="go-forward" data-on="click" href="#refresh">Refresh <i class="fa fa-chevron-right"></i></a>
        </nav>
    </div>
<aside id="aside-startlist" class="aside aside-right">
<a class="btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-startlist"><i class="fa fa-chevron-right"></i></a>
        <h2 class="pad">Start List functions</h2>
<h4 class="pad upper">With checked:</h4>
<div class="focus">
<a class="btn btn-default" id="uncheck" data-role="uncheck" href="#">Uncheck all</a>
</div>
<div class="focus">
<a class="btn btn-default" id="check" data-role="check" href="#">Check all</a>
</div>
<div class="focus">
<a class="btn btn-default" id="recheck" data-role="recheck" href="#">Reverse all</a>
</div>
<div class="focus">
  <label>to pool:</label>
  <input
    type="text" 
    id="startList_table-pool"
    class="form-control"
    placeholder="Pool..." />
<a class="btn btn-default" id="pool" data-role="pool" href="#">OK</a>
</div>
<div class="focus">
  <label>to rule:</label>
  <input 
    type="text" 
    id="startList_table-rules"
    class="form-control" 
    placeholder="Rule..." />
<a class="btn btn-default" id="rules" data-role="rules" href="#">OK</a>
</div>
<div class="focus">
  <label>to class:</label>
  <input
    type="text" 
    id="startList_table-class"
    class="form-control"
    placeholder="Class..." />
<a class="btn btn-default" id="class" data-role="class" href="#">OK</a>
</div>
<div class="focus">
<a class="btn btn-default" id="delete" data-role="delete" href="#">Delete</a>
</div>
</aside>

    <div id="menu" class="modal hide">
        <header class="head">
            <a class="head-link pull-right" href="#menu" data-do="modal-close" data-on="click">
                <i class="fa fa-times"></i>
            </a>
            <h1 class="title">Menu</h1>
        </header>
        <section class="body with-head">
                <h4 id="menucompetition" class="pad upper">Menu</h4>
            <div class="row pad">
	<div class="focus">
		<p id="menudescription"></p>
	</div>
	<nav class="nav-list">
        <a data-do="go-forward" data-on="click" onclick="$.mobility.modalClose('#menu');" href="#results">Results<i class="fa fa-chevron-right"></i></a>
        <a data-do="go-forward" data-on="click" onclick="$.mobility.modalClose('#menu');" href="#register">Register points<i class="fa fa-chevron-right"></i></a>
        <a data-do="go-forward" data-on="click" onclick="$.mobility.modalClose('#menu');" href="#administration">Administration<i class="fa fa-chevron-right"></i></a>
        <a data-do="go-forward" data-on="click" onclick="$.mobility.modalClose('#menu');" href="#pools">Start list<i class="fa fa-chevron-right"></i></a>
        </nav>
            </div>
        </section>
    </div>
    

    <script id="results" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
	    <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#home"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title">Results</h1>
        </header>
        <section class="body with-head with-foot">
                <h4 class="pad upper">Results</h4>
        <nav class="nav-list">
	<div class="nav-results"></div>
        </nav>
         <h4 class="pad upper">Start list</h4>
         <nav class="nav-list">
               <a data-do="go-forward" data-on="click" href="#pools">Start list<i class="fa fa-chevron-right"></i></a>
         </nav>
        </section>
	<script>
	var divnavresults = "";
	for (var n = 0; n < apps.length; n++) {
		divnavresults = divnavresults + '<a data-do="go-forward" data-on="click" href="#' + apps[n] + '">' + appname[apps[n]] + '<i class="fa fa-chevron-right"></i></a>';
	}
	divnavresults = divnavresults + '<a data-do="go-forward" data-on="click" href="#allaround' + agtype + '">' + appname[agtype] + '<i class="fa fa-chevron-right"></i></a>';
	$( "div.nav-results" ).replaceWith(divnavresults);
	</script>
     </script>
    <script id="pools" type="text/html">
        <header class="head">
<!--            <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title">Start list</h1>
        </header>
        <section class="body with-head with-foot">
        <h4 class="pad upper">Start list</h4>
        <div class="div-pools"></div>
        </section>
        <script>
              var currpools = new Array();
              $.ajax({
                      'async': false,
                      url: "/ES/" + competition + "/startList/_search?size=20&sort=pool",
                      success: function(s){
                              for (var i = 0; i < s.hits.hits.length; i++) {
                                      currpools.push(s.hits.hits[i]._source.pool);
                              }
                     }
              });
//	      currpools.sort();
              var lastpool="";
	      var divpools="";
	      var localapps = new Array();
	      for (var o = 0; o < apps.length; o++) {
			localapps[o] = apps[o];
	      }
              for (var n = 0; n < currpools.length; n++) {
                        if (currpools[n] != lastpool) {
				localorder = "";
				for (var o = 0; o < localapps.length; o++) {
					if (localorder == "") {
						localorder=appname[localapps[o]];
					} else {
						localorder=localorder + '&nbsp;<i class="fa fa-long-arrow-right" aria-hidden="true"></i>&nbsp;' + appname[localapps[o]];
					}
				}
				localapps.push(localapps.shift());
              			divpools=divpools + '<h2 class="pad upper">Pool ' + currpools[n] + '</h2><H4>' + localorder + '</H4><table id="pools_table' + currpools[n] + '" class="startList_all_table table table-condensed"><thead><th>Number</th><th>Gymnast</th><th>Team</th><th>Born</th><th>Class</th><th>About</th></thead> <tbody></tbody></table>';
                        }
                        lastpool=currpools[n];
              }
              $( "div.div-pools" ).replaceWith('<div class="div-pools">' + divpools + '</div>');
	      var lastpool="";
              for (var n = 0; n < currpools.length; n++) {
                        if (currpools[n] != lastpool) {
                                drawgymtable("/ES/" + competition + "/startList/_search?size=100&q=pool:"+currpools[n],"pools_table"+currpools[n],"pools");
                        }
                        lastpool=currpools[n];
              }
        </script>
     </script>

    <script id="register" type="text/html">
        <header class="head">
<!-- 		<a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
	    <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#home"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title">Register points</h1>
        </header>
        <section class="body with-head with-foot">
                <h4 class="pad upper">Register Points</h4>
        <nav class="nav-list">
	<div class="nav-register"></div>
        </nav>
	</section>
        <script>
        var divnavregister = "";
	if (username != "User" ) {
        for (var n = 0; n < apps.length; n++) {
                divnavregister = divnavregister + '<a data-do="go-forward" data-on="click" href="#REG' + apps[n] + '">' + appname[apps[n]] + '<i class="fa fa-chevron-right"></i></a>';
        }
        $( "div.nav-register" ).replaceWith(divnavregister);
	} else  {
		$( "div.nav-register" ).replaceWith('<div class="focus"><p>Please log in to register points!</p></div>');
	}
        </script>

     </script>
   <script id="administration" type="text/html">
        <header class="head">
<!--             <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
	    <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#home"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title">Administration</h1>
        </header>
        <section class="body with-head with-foot">
                <h4 class="pad upper">Administration</h4>
        <nav class="nav-list">
		<div class="nav-admin"></div>
        </nav>
        </section>
	<script>
	if (username != "User" ) {
		$( "div.nav-admin" ).replaceWith('<a data-do="go-forward" data-on="click" href="#startList">Start list<i class="fa fa-chevron-right"></i></a><a data-do="go-forward" data-on="click" href="#rule">Rules<i class="fa fa-chevron-right"></i></a><a data-do="go-forward" data-on="click" href="#competition">Competitions<i class="fa fa-chevron-right"></i></a><a data-do="go-forward" data-on="click" href="#teams">Teams<i class="fa fa-chevron-right"></i></a><a data-do="go-forward" data-on="click" href="#none">Backup/Restore<i class="fa fa-chevron-right"></i></a>');
	} else {
		$( "div.nav-admin" ).replaceWith('<div class="focus"><p>Please log in to administer the competition!</p></div>');
	}
	</script>
     </script>

    <script id="home" type="text/html">
        <header class="head">
<!--            <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a>-->
            <h1 class="title">AGScore.se
            </h1>
        </header>
        
        <section class="body with-head with-foot">
			<h4 class="pad upper">AGscore.se</h4>
            <div class="focus">
  <label class="top">Select<br>competition</label>
    <select id="select-competition" class="form-control">
    <option>None</option>
  </select>
</div>
<div class="focus">
<p id="pdescription"></p>
</div>
        <nav class="nav-list">
	<a data-do="go-forward" data-on="click" href="#results">Results<i class="fa fa-chevron-right"></i></a>
	<a data-do="go-forward" data-on="click" href="#register">Register points<i class="fa fa-chevron-right"></i></a>
	<a data-do="go-forward" data-on="click" href="#administration">Administration<i class="fa fa-chevron-right"></i></a>
</nav>
        </section>
	<script>
	initcompetition();
	</script>
    </script>

    <script id="teams" type="text/html">
        <header class="head">
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#administration"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title">Teams</h1>
        </header>
        <section class="body with-head with-foot">
	<div class="focus">
        <div id="divteams"></div>
	<div>
        <script>
             var currteams = new Array();
	     divteams = "";
             $.ajax({
                'async': false,
                url: "/ES/global/startList/_search?size=100",
                success: function(s){
                        for (var i = 0; i < s.hits.hits.length; i++) {
                                currteams.push(JSON.parse('{"id":"' + s.hits.hits[i]._source.team + '"}'));
                        }
                }
             });
             $.ajax({
                'async': false,
                url: "/ES/global/competition/_search?size=100",
                success: function(s){
                        for (var i = 0; i < s.hits.hits.length; i++) {
                                currteams.push(JSON.parse('{"id":"' + s.hits.hits[i]._source.organizer + '"}'));
                        }
                }
             });
		data = sortJSON(currteams,'id', '123');
             var lastteam="";
             for (var n = 0; n < currteams.length; n++) {
                        if (currteams[n].id == lastteam) {
                                currteams.splice(n,1);
                                n--;
                        }
                        lastteam=currteams[n].id;
             }
	  var option='<option value="default">Grey</option><option value="blue">Blue</option><option value="green">Green</option><option value="orange">Orange</option><option value="pink">Pink</option><option value="purple">Purple</option><option value="red">Red</option><option value="bluered">Blue & red</option>'
	var select="";
	divteams=divteams+'<table class="table table-condensed"><thead><tr><th>Team</th><th>Color</th><th></th></tr></thead><tbody>';
	for (var n = 0; n < currteams.length; n++) {
		select='<select onchange="javascript:updatecss(\'' + camelize(currteams[n].id) + '\');" id="css_' + camelize(currteams[n].id) +'" class="form-control">' + option + '</select>';
		divteams=divteams+'<tr><td>' + currteams[n].id + '</td><td>' + select + '</td><td><a href="javascript:uploadimage(\'' + camelize(currteams[n].id) + '\',\'team\',\'' + currteams[n].id + '\');"><i class="fa fa-file-image-o"></i></a></td></tr>'
	}
	divteams=divteams+'</tbody></table>';
	$("#divteams").replaceWith('<div id="divteams">' + divteams + '</div>');
	currteams = [];
	$.ajax({
                'async': false,
                url: "/ES/global/team/_search?size=100",
                success: function(s){
                        for (var i = 0; i < s.hits.hits.length; i++) {
				$("#css_" + s.hits.hits[i]._source.id).val(s.hits.hits[i]._source.css);
                        }
                }
             });
	</script>
        </section>
    </script>
    <script id="rule" type="text/html">
        <header class="head">
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#administration"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title">Rules</h1>
        </header>
        <section class="body with-head with-foot">
	<div id="comprules"></div>
	<script>
	     var currules = new Array();
	     $.ajax({
                'async': false,
                url: "/ES/" + competition + "/startList/_search?size=100&sort=rules",
                success: function(s){
			for (var i = 0; i < s.hits.hits.length; i++) {
                                currules.push(JSON.parse('{"id":"' + s.hits.hits[i]._source.rules + '"}'));
                        }
	        }
             });
	     var lastrule="";
	     for (var n = 0; n < currules.length; n++) {
			if (currules[n].id == lastrule) {
				currules.splice(n,1);
				n--;
			}
			lastrule=currules[n].id;
	     }
	     var divcomprules="";
	     var comprules = new Array();
             $.ajax({
             	'async': false,
             	url: "/ES/global/startList/_search?q=agtype:" + agtype + '&size=100&sort=rules',
             	success: function(s){
			for (var i = 0; i < s.hits.hits.length; i++) {
				comprules.push(JSON.parse('{"id":"' + s.hits.hits[i]._source.rules + '"}'));
                        }
			lastrule="";
			var divclassrow = "";
			divcomprules='<div class="focus focus-group">';
			var localcomprules = new Array();
		        var comprow = "";
			for (var i = 0; i < comprules.length; i++) {
				if (lastrule != comprules[i].id) {
		        		comprow = "";
					var camelid=camelize(comprules[i].id);
					var esrules = new Array();
					divclassrow = "zrulesirrelevant row"
					esindex = "global";
					for (var n = 0; n < currules.length; n++) {
						if (comprules[i].id == currules[n].id) {
							divclassrow = "row";
							esindex = competition;
						}
					}
					$.ajax({
                                                'async': false,
                                                url: "/ES/" + esindex + "/rules/"+agtype + "-" + camelid,
                                                success: function(t){
                                                        esrules = t._source;
                                                }
                                        });
					comprow = comprow + '<div class="' + divclassrow + '"><div class="col-xs-1 middle"><h1>' + comprules[i].id + '</h1></div><table id="rules_' + comprules[i].id +'"class="table table-condensed">';
					var trows1='<tr><td>Results are public</td><td><span class="switch switch-2"><input onchange="changerule(\'public_' + camelid + '\');" id="public_' + camelid + '" type="checkbox" name="check" value="PH" ';
					if (esrules.public == "true") {
						trows1=trows1 + ' checked="checked" ';
					}
					trows1=trows1 + '/><span></td>';
					var trows2='<tr><td>Extra Bonus in Pommel horse</td><td><span class="switch switch-2"><input onchange="changerule(\'bph_' + camelid + '\');" id="bph_' + camelid + '" type="checkbox" name="check"  value="PH" ';
					if (esrules.bph == "true") {
						trows2=trows2+ ' checked="checked" ';
					}
					trows2=trows2+ '/><span></td>';
					var trows3='<tr><td>Second Pommel horse exercise</td><td><span class="switch switch-2"><input onchange="changerule(\'sph_' + camelid + '\');" id="sph_' + camelid + '" type="checkbox" name="check"  value="PH" ';
					if (esrules.sph == "true") {
						trows3=trows3 + ' checked="checked" ';
					}
					trows3=trows3 + '/><span></td>';
					var trows4='<tr><td>Second vault</td><td><span class="switch switch-2"><input onchange="changerule(\'sv_' + camelid + '\');" id="sv_' + camelid + '" type="checkbox" name="check" value="PH" ';
					if (esrules.sv == "true") {
						trows4=trows4 + ' checked="checked" ';
					}
					trows4=trows4 + '/><span></td>';
					var trows5='<tr><td>Register only average D</td><td><span class="switch switch-2"><input onchange="changerule(\'st_' + camelid + '\');" id="st_' + camelid + '" type="checkbox" name="check" value="PH" ';
					if (esrules.st == "true") {
						trows5=trows5 + ' checked="checked" ';
					}
					trows5=trows5 + '/><span></td>';
					var trows6='<tr><td>Count second vault in ' + appname[agtype] + '</td><td><span class="switch switch-2"><input onchange="changerule(\'v2a_' + camelid + '\');" id="v2a_' + camelid + '" type="checkbox" name="check" value="PH" ';
					if (esrules.v2a == "true") {
						trows6=trows6 + 'checked="checked" ';
					}
					trows6=trows6 + '/><span></td>';
					comprow = comprow + trows1 + '</tr>';
					if (agtype == "MAG") {
						comprow = comprow + trows2 + '</tr>';
						comprow = comprow + trows3 + '</tr>';
						comprow = comprow + trows4 + '</tr>';
					} else { 
						comprow = comprow + trows5 + '</tr>';
						comprow = comprow + trows6 + '</tr>';
					}
					comprow = comprow + '</table></div>';
					localcomprules.push(comprow);
				}
				lastrule=comprules[i].id;
			}
			localcomprules.sort();
			for (var i = 0; i < localcomprules.length; i++) {
				divcomprules = divcomprules + localcomprules[i];
			}
			divcomprules = divcomprules + '</div>';
			$("#comprules").replaceWith('<div id="comprules">' + divcomprules + '</div>');
             	}
             });
	</script>
        </section>
</script>

    <script id="competition" type="text/html">
        <header class="head">
<!--            <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a>-->
	    <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#administration"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title">Competitions</h1>
        </header>

        <section class="body with-head with-foot">
            <div class="focus">
  <label class="top">Select<br>competition</label>
    <select id="select-competition" class="form-control">
    <option>None</option>
  </select>
<a data-do="modal-open" id="editcomp" data-on="click" href="#newCompetition">
                <i class="fa fa-pencil-square-o fa-2x"></i>
            </a>
<a id="delCompetition" onclick="return confirm('Are you sure?! This will clear all scores and the start list of the selected competition')" href="javascript:deletecompetition($('#select-competition').val());">
                <i class="fa fa-times fa-2x"></i>
            </a>
<a data-do="modal-open" id="newcomp" data-on="click" href="#newCompetition">
                <i class="fa fa-plus fa-2x"></i>
            </a>
</div>
        </section>
        <script>
        initcompetition();
$(function() {
      $("#editcomp").click( function()
           {
		$('#name').val(currcompetition.name);
            	$('#date').val(currcompetition.date);
            	$('#date2').val(currcompetition.date2);
            	$('#organizer').val(currcompetition.organizer);
            	$('#type').val(currcompetition.type);
            	$('#cid').val(currcompetition.id);
//		$('#css').val(currcompetition.css);
            	$('#description').val(currcompetition.description);
            	$('#created').val(currcompetition.created);
            	$('#create').val("Update");
		$( "#compsymb" ).replaceWith('<div id="compsymb"><i class="fa fa-pencil-square-o fa-5x"></i></div>');

           }
      );
});
$(function() {
      $("#newcomp").click( function()
           {
                $('#name').val("");
                $('#date').val("");
                $('#date2').val("");
                $('#organizer').val(currcompetition.organizer);
                $('#type').val(currcompetition.type);
                $('#cid').val("n");
 //               $('#css').val("");
                $('#description').val("");
                $('#created').val("n");
                $('#create').val("Create");
		$( "#compsymb" ).replaceWith('<div id="compsymb"><i class="fa fa-plus fa-5x"></i></div>');
           }
      );
});


        </script>
    </script>


       <script id="startList" type="text/html">
        <header class="head">
<a class="head-btn btn btn-default pull-right" data-do="aside" data-on="click" href="#aside-startlist"><i class="fa fa-bars"></i></a> 
<a class="head-btn btn btn-default pull-right" id="new" data-role="new" href="#"><i class="fa fa-plus"></i></a>
<!--             <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a>-->
<a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#administration"><i class="fa fa-arrow-left"></i></a>
<h1 class="title">Start list</h1>
        </header>
        <section class="body with-foot with-head pad">
<h3 class="pad">Start list</h3>
<div class="focus">
  <label class="top">Search:</label>
  <input id="startList_table-search"
    type="text" 
    class="form-control" 
    placeholder="Type filter.." />
</div>
<div id="startList_table"></div>
<div class="focus">
<p>
* Mandatory, gymnast will not be updated until filled in.
</div>
<h3 class="pad">Previously registered gymnasts</h3>
<table id="startList_all_table" class="startList_all_table table table-condensed">
<thead>
<th>Team</th>
<th>Gymnast</th>
<th>Born</th>
<th>Class</th>
<th>Rules</th>
<th>About</th>
<th data-dynatable-column="add"></th>
</thead>
 <tbody>
 </tbody>
</table>

<script>
if ( $(window).width() < 568 ) {
	$.mobility.notify("Editing the start list on a small screen is not recommended!, at least tilt your device to landscape!","warning");
} else if ( $(window).width() < 768 ) {
	$.mobility.notify("Editing the start list on a small screen is not recommended!","warning");
}
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","startList_table","edit");
drawgymtable("/ES/global/startList/_search?size=5000&q=agtype:" + agtype,"startList_all_table","global");
$( "#startList_table-search" ).val(editableGrid.currentFilter);
$( "#startList_table-search" ).change(function() {
	editableGrid.filter($("#startList_table-search").val());
});
editableGrid.modelChanged = function(rowIndex, columnIndex, oldValue, newValue, row) {
		var post = this.getRowValues(rowIndex);
                var notify;
                var notifytype;
		if ((this.getColumnName(columnIndex) != "checked") & (post.gymnast.length > 4 ) & (post.pool.length > 0) & (post.team.length > 1 ) & (post.class.length > 0 ) & (post.number > 0)) {
			if (post.id.length < 5 ) {
				post.id =  camelize(post.gymnast + post.team);
				this.setValueAt(rowIndex, 2, post.id, true);
				this.setValueAt(rowIndex, 10, '<a href="javascript:uploadimage(\'' + post.id + '\',\'gymnast\',\'' + post.gymnast + '\');"><i class="fa fa-file-image-o"></i></a>' , true);
				this.setValueAt(rowIndex, 11, '<a href="javascript:delgymnast(\'' + post.id + '\');"><i class="fa fa-times"></i></a>', true);
			}
				var klasssplit = new Array();
                            	klasssplit = post.class.split(" ");
    				if ((klasssplit[0].toLowerCase() == "steg") && (klasssplit[1] < 5)) {
        				post.rules = "Steg4-";
    				} 
				if ((klasssplit[0].toLowerCase() == "steg") && (klasssplit[1] > 4)) {
        				post.rules = "Steg5+";
    				}
    				if ((post.class.substring(0, 2) == "RM") && (post.class.substring(2, 3) < 9)) {
        				post.rules = post.class;
    				}
    				if (klasssplit[0].toLowerCase() == "cop" ) {
        				post.rules = "CoP";
    				}
                                editableGrid.setValueAt(rowIndex,6,post.rules,true);
			startlistedit("POST",post,true);
		}
                };

$(function() {
	var post = new Array();
      $("#delete").click( function()
           {
		for (var i = 0; i < editableGrid.getRowCount(); i++) { 
			if (editableGrid.getRowValues(i).checked) {
				post = editableGrid.getRowValues(i);
				startlistedit("DELETE",post,true);
				editableGrid.removeRow(editableGrid.getRowId(i));
				i = -1;
			}
		}
           }
      );
});
$(function() {
      $("#uncheck").click( function()
           {
                for (var i = 0; i < editableGrid.getRowCount(); i++) {
                        if (editableGrid.getRowValues(i).checked) {
                                editableGrid.setValueAt(i,9,"false",true);
                        }
                }
           }
      );
});
$(function() {
      $("#check").click( function()
           {
                for (var i = 0; i < editableGrid.getRowCount(); i++) {
                        if (!editableGrid.getRowValues(i).checked) {
                                editableGrid.setValueAt(i,9,"true",true);
                        }
                }
           }
      );
});
$(function() {
      $("#recheck").click( function()
           {
                for (var i = 0; i < editableGrid.getRowCount(); i++) {
                        if (editableGrid.getRowValues(i).checked) {
                                editableGrid.setValueAt(i,9,"false",true);
                        } else {
                                editableGrid.setValueAt(i,9,"true",true);
			}
                }
           }
      );
});

$(function() {
	var post = new Array();
      $("#class").click( function()
           {
	   	var newKlass=$("#startList_table-class").val();
                for (var i = 0; i < editableGrid.getRowCount(); i++) { 
                        if (editableGrid.getRowValues(i).checked) {
				editableGrid.setValueAt(i,5,newKlass,true);
				post = editableGrid.getRowValues(i);
				startlistedit("POST",post,false);
                        }
                }
           }
      );
});
$(function() {
	var post = new Array();
      $("#rules").click( function()
           {
                var newRules=$("#startList_table-rules").val();
                for (var i = 0; i < editableGrid.getRowCount(); i++) {
                        if (editableGrid.getRowValues(i).checked) {
                                editableGrid.setValueAt(i,6,newRules,true);
				post = editableGrid.getRowValues(i);
				startlistedit("POST",post,false);
                        }
                }
           }
      );
});

$(function() {
	var post = new Array();
      $("#pool").click( function()
           { 
	   	var newPool=$("#startList_table-pool").val();
                for (var i = 0; i < editableGrid.getRowCount(); i++) {
                        if (editableGrid.getRowValues(i).checked) {
                                editableGrid.setValueAt(i,7,newPool,true);
				post = editableGrid.getRowValues(i);
				startlistedit("POST",post,false);
                        }
                }
           }
      );
});


$(function() {
      $("#new").click( function()
           {
		//var d = new Date();
		//var n = d.getTime();
		//var new_id = n + "_" + Math.floor((Math.random() * 10000) + 1);
		var new_id = "n";
		var new_index=editableGrid.getRowCount() + 1;
		var new_startnr = 0;
		var datalocal=[];
		for (var i = 0; i < editableGrid.getRowCount(); i++) {
			if (editableGrid.getRowValues(i).number >= new_startnr) {
				new_startnr = editableGrid.getRowValues(i).number + 1;
			}
		}
		if (new_startnr < 1) {
			new_startnr = 1;
		}
		datalocal.number = new_startnr;
		datalocal.id = new_id;
		datalocal.checked = true;
		datalocal.agtype = agtype;
		datalocal.del = '<a href="javascript:void(0);"><i class="fa fa-times"></i></a>';
		datalocal.img = '<a href="javascript:void(0);"><i class="fa fa-file-image-o"></i></a>';
//		editableGrid.insertAfter(new_index, new_index, JSON.parse('{ "number" : "' + new_startnr + '","id":"'+ new_id + '","del":"<a href=\"javascript:delgymnast(\'' + new_id + '\');\"><i class=\"fa fa-times\"></i></a>"}'));
		editableGrid.insertAfter(new_index, new_index, datalocal);
           }
      );
});
//var options = {
//    url: "people.json",
//    getValue: "name",
//    template: {
//        type: "description",
//        fields: {
//            description: "email"
//        }
//    },
//    list: {
//        match: {
//            enabled: true
//        }
//    },
//    theme: "plate-dark"
//};
//$('#startList_table [id^="gymnast_"]').easyAutocomplete(options);
//$('#startList_table-stacktable-small-only [id^="gymnast_"]').easyAutocomplete(options);
//$("div.easy-autocomplete").removeAttr("width");

</script>
     </section>
    </script>

       <script id="none" type="text/html">
        <header class="head">
<!--            <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
	<a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#administration"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title">Nothing yet.</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
<input type="file" class="form-control" onchange="uploadFile('gymnast','new','#uploadimg')"><br>
</div>
<div class="profile-userpic"><img id="uploadimg" src="images/KFUM.png" alt=""></div>
     </section>
    </script>
  
      <script id="allaroundMAG" type="text/html">
        <header class="head">
<!--            <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/floor.png" \><img src="images/horse.png" \><img src="images/rings.png" \><img src="images/vault.png" \><img src="images/bars.png" \><img src="images/highBar.png" \></h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="allaround_tableMAG-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="allaround_tableMAG" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Floor</th>
<th>Pommel horse</th>
<th>Rings</th>
<th>Vault</th>
<th>Parallel bars</th>
<th>High bar</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>

<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","allaround_tableMAG");
</script>
        </section>
    </script> 

      <script id="allaroundWAG" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/vault.png" \><img src="images/unevenBars.png" \><img src="images/beam.png" \><img src="images/floor.png" \></h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="allaround_tableWAG-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="allaround_tableWAG" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Vault</th>
<th>Uneven Bars</th>
<th>Beam</th>
<th>Floor</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>

<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","allaround_tableWAG");
</script>
        </section>
    </script> 

      <script id="floor" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/floor.png" \>&nbsp;Floor</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="floor_table-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="floor_table" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>

<script>
drawgymtable("/ES/" + competition + "/floor/_search?size=1000","floor_table");
</script>
        </section>
    </script>
       <script id="pommelHorse" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/horse.png" \>&nbsp;Pommel horse</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="pommelHorse_table-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="pommelHorse_table" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>

<script>
drawgymtable("/ES/" + competition + "/pommelHorse/_search?size=1000","pommelHorse_table");
</script>
        </section>
 </script>
    
      <script id="rings" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/rings.png" \>&nbsp;Rings</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="rings_table-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="rings_table" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>

<script>
drawgymtable("/ES/" + competition + "/rings/_search?size=1000","rings_table");
</script>
        </section>
    </script>
      <script id="vault" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/vault.png" \>&nbsp;Vault</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="vault_table-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="vault_table" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>

<script>
drawgymtable("/ES/" + competition + "/vault/_search?size=1000","vault_table");
</script>
  </section>
    </script>

      <script id="parallelBars" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/bars.png" \>&nbsp;Parallel Bars</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="parallelBars_table-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="parallelBars_table" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>

<script>
drawgymtable("/ES/" + competition + "/parallelBars/_search?size=1000","parallelBars_table");
</script>
  </section>
    </script>

      <script id="highBar" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/highBar.png" \>&nbsp;High bar</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="highBar_table-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="highBar_table" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>

<script>
drawgymtable("/ES/" + competition + "/highBar/_search?size=1000","highBar_table");
</script>
  </section>
    </script>

      <script id="beam" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/beam.png" \>&nbsp;Balance Beam</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="beam_table-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="beam_table" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>
<script>
drawgymtable("/ES/" + competition + "/beam/_search?size=1000","beam_table");
</script>
  </section>
    </script>

      <script id="unevenBars" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#results"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/unevenBars.png" \>&nbsp;Uneven Bars</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select class:</label>
  <select id="unevenBars_table-search-class" class="form-control">
    <option></option>
  </select>
</div>
<table id="unevenBars_table" class="table table-condensed">
<thead>
<th>Class</th>
<th>Rank</th>
<th data-dynatable-column="number">#</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
</thead>
 <tbody>
 </tbody>
</table>
<script>
drawgymtable("/ES/" + competition + "/unevenBars/_search?size=1000","unevenBars_table");
</script>
  </section>
    </script>
       
<script id="REGfloor" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#register"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/floor.png" \>&nbsp;Floor</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select pool:</label>
  <select id="floor_table-search-pool" class="form-control">
    <option></option>
  </select>
</div>
<form action="" id="floor_table_form">
<table id="floor_table" class="table table-condensed">
<thead>
<th>Class</th>
<th data-dynatable-column="number">#</th>
<th style="display: none">Pool</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
<th data-dynatable-column="delete">&nbsp;</th>
</thead>
 <tbody>
 </tbody>
</table>
</form>
<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","floor_table","reg");
</script>
        </section>
 </script>

<script id="REGpommelHorse" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#register"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/horse.png" \>&nbsp;Pommel horse</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select pool:</label>
  <select id="pommelHorse_table-search-pool" class="form-control">
    <option></option>
  </select>
</div>
<form action="" id="pommelHorse_table_form">
<table id="pommelHorse_table" class="table table-condensed">
<thead>
<th>Class</th>
<th data-dynatable-column="number">#</th>
<th style="display: none">Pool</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
<th data-dynatable-column="delete">&nbsp;</th>
</thead>
 <tbody>
 </tbody>
</table>
</form>
<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","pommelHorse_table","reg");
</script>
        </section>
 </script>


<script id="REGrings" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#register"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/rings.png" \>&nbsp;Still rings</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select pool:</label>
  <select id="rings_table-search-pool" class="form-control">
    <option></option>
  </select>
</div>
<form action="" id="rings_table_form">
<table id="rings_table" class="table table-condensed">
<thead>
<th>Class</th>
<th data-dynatable-column="number">#</th>
<th style="display: none">Pool</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
<th data-dynatable-column="delete">&nbsp;</th>
</thead>
 <tbody>
 </tbody>
</table>
</form>
<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","rings_table","reg");
</script>
        </section>
 </script>

<script id="REGvault" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#register"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/vault.png" \>&nbsp;Vault</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select pool:</label>
  <select id="vault_table-search-pool" class="form-control">
    <option></option>
  </select>
</div>
<form action="" id="vault_table_form">
<table id="vault_table" class="table table-condensed">
<thead>
<th>Class</th>
<th data-dynatable-column="number">#</th>
<th style="display: none">Pool</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
<th data-dynatable-column="delete">&nbsp;</th>
</thead>
 <tbody>
 </tbody>
</table>
</form>
<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","vault_table","reg");
</script>
        </section>
 </script>

<script id="REGparallelBars" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#register"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/bars.png" \>&nbsp;Parallel bars</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select pool:</label>
  <select id="parallelBars_table-search-pool" class="form-control">
    <option></option>
  </select>
</div>
<form action="" id="parallelBars_table_form">
<table id="parallelBars_table" class="table table-condensed">
<thead>
<th>Class</th>
<th data-dynatable-column="number">#</th>
<th style="display: none">Pool</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
<th data-dynatable-column="delete">&nbsp;</th>
</thead>
 <tbody>
 </tbody>
</table>
</form>
<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","parallelBars_table","reg");
</script>
        </section>
 </script>

<script id="REGhighBar" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#register"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/highBar.png" \>&nbsp;High bar</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select pool:</label>
  <select id="highBar_table-search-pool" class="form-control">
    <option></option>
  </select>
</div>
<form action="" id="highBar_table_form">
<table id="highBar_table" class="table table-condensed">
<thead>
<th>Class</th>
<th data-dynatable-column="number">#</th>
<th style="display: none">Pool</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
<th data-dynatable-column="delete">&nbsp;</th>
</thead>
 <tbody>
 </tbody>
</table>
</form>
<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","highBar_table","reg");
</script>
        </section>
 </script>

<script id="REGbeam" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#register"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/beam.png" \>&nbsp;Beam</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select pool:</label>
  <select id="beam_table-search-pool" class="form-control">
    <option></option>
  </select>
</div>
<form action="" id="beam_table_form">
<table id="beam_table" class="table table-condensed">
<thead>
<th>Class</th>
<th data-dynatable-column="number">#</th>
<th style="display: none">Pool</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
<th data-dynatable-column="delete">&nbsp;</th>
</thead>
 <tbody>
 </tbody>
</table>
</form>
<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","beam_table","reg");
</script>
        </section>
 </script>

<script id="REGunevenBars" type="text/html">
        <header class="head">
<!--	    <a class="head-btn btn btn-default pull-left" data-do="aside" data-on="click" href="#aside-left"><i class="fa fa-bars"></i></a> -->
            <a class="head-btn btn btn-default pull-left" data-do="go-back" data-on="click" href="#register"><i class="fa fa-arrow-left"></i></a>
            <h1 class="title"><img src="images/unevenBars.png" \>&nbsp;Uneven bars</h1>
        </header>
        <section class="body with-foot with-head pad">
<div class="focus">
  <label class="top">Select pool:</label>
  <select id="unevenBars_table-search-pool" class="form-control">
    <option></option>
  </select>
</div>
<form action="" id="unevenBars_table_form">
<table id="unevenBars_table" class="table table-condensed">
<thead>
<th>Class</th>
<th data-dynatable-column="number">#</th>
<th style="display: none">Pool</th>
<th>Gymnast</th>
<th>Born</th>
<th>Team</th>
<th>Pen</th>
<th>D</th>
<th>E1</th>
<th>E2</th>
<th>E3</th>
<th>E4</th>
<th>Avg E</th>
<th>Base</th>
<th>E</th>
<th>Total</th>
<th data-dynatable-column="delete">&nbsp;</th>
</thead>
 <tbody>
 </tbody>
</table>
</form>
<script>
drawgymtable("/ES/" + competition + "/startList/_search?size=1000","unevenBars_table","reg");
</script>
        </section>
 </script>
 <div id="newCompetition" class="modal hide">
        <header class="head">
            <a class="head-link pull-right" href="#newCompetition" data-do="modal-close" data-on="click">
                <i class="fa fa-times"></i>
            </a>
            <h1 class="title">Competition</h1>
        </header>
    
        <section class="body with-head">
            <div class="row pad">
                <div class="col-md-1 middle">
		    <div id="compsymb">
                    <i class="fa fa-plus fa-5x"></i> 
		    </div>
                </div>
				<div class="newCompetition">
                <div class="col-md-11">


<form id="newCompetition-form">
<input type="hidden" id="cid" name="cid" value="n">
<input type="hidden" id="created" name="created" value="n">
<div class="focus">
  <label>Name:</label>
  <input 
    type="text" 
    id="name"
    class="form-control" 
    placeholder="Competition name..." />
</div>
<div class="focus">
  <label>Organizer:</label>
  <input
    type="text"
    id="organizer"
    class="form-control"
    placeholder="Organizing team..." />
</div>
<div class="focus">
  <label>Start date:</label>
  <input 
    type="date" 
    id="date" 
    class="form-control"
    placeholder="Date" />
</div>
<div class="focus">
  <label>End date:</label>
  <input
    type="date"
    id="date2"
    class="form-control"
    placeholder="Date" />
</div>
<div class="focus">
  <label class="top">Type</label>
  <select id="type" class="form-control">
    <option value="WAG">Women's artistic gymnastics</option>
    <option value="MAG">Men's artistic gymnastics</option>
  </select>
</div>

<div class="focus">
  <textarea 
    class="form-control"
    id="description"
    rows="3" 
    placeholder="Enter description..."></textarea>
</div>
<div class="focus">
            <input class="btn btn-default" id="create" type="submit" value="Create">
</div>
</form>
<script>
 (function($){
        function processForm( e ){
            e.preventDefault();
	    var post = {};
	    post.name = $('#name').val();
	    post.date = $('#date').val();
	    post.date2 = $('#date2').val();
	    post.organizer = $('#organizer').val();
	    post.type = $('#type').val();
	    post.id = $('#cid').val();
	    var testC = "false";
	    var mess = " updated!";
	    if (post.id.length < 3) {
	    	post.id = camelize(post.organizer) + "-" + camelize($('#name').val());
	    	post.id = post.id.toLowerCase();
	    	testC = post.id;
	    	var mess = " created!";
	    }
	    post.css = $('#css').val();
	    post.description = $('#description').val();
	    post.created = $('#created').val();
	    if (post.created.length < 3) {
	    	post.created = Math.floor(new Date()/1000);
	    }
	    if ((post.date2 < post.date) && (post.date2)) {
		$.mobility.notify("End date can not be before start date!","error");
		return false;
	    }
	    if (post.name.length < 5) {
		$.mobility.notify("Name to short!","error");
		return false;
	    }
	    if (post.organizer.length < 2) {
		$.mobility.notify("Organizer name to short!","error");
		return false;
	    }
	    if ((post.type == "WAG") || (post.type == "MAG")) {
		$.ajax({
			'async': false,
			url: "/ES/global/competition/" + testC,
			success: function(result){
				$.mobility.notify("Competition name already used!","error");
			},
			error: function(result){
				    $.ajax({
        				'async': false,
        				type: "POST",
				        url: "/ES/global/competition/" + post.id,
				        data: JSON.stringify(post),
				        contentType: "application/json; charset=utf-8",
				        dataType: "json",
				        success: function(s){
                                    		$.ajax({
                                        		'async': false,
                                        		type: "POST",
                                        		url: "/ES/"+  post.id + "/competition/" + post.id,
                                        		data: '{"name":"dummy"}',
                                        		contentType: "application/json; charset=utf-8",
                                        		dataType: "json",
                                        		success: function(s){	
								$.mobility.notify("Competition " + post.name +  mess ,"success");
                                                    		changecompetition(post.id);
                                                    		$.mobility.modalClose('#newCompetition');
								initcompetition();
                                        		}
                                    		});
					}
				    });
			}
    		});
	    } else {
		$.mobility.notify("AGScore.se does only handle WAG or MAG competitions!","error");
		return false;
	    }
        }
        $('#newCompetition-form').submit( processForm );
    })(jQuery);
</script>
                </div>
				<div>
            </div>
        </section>
    </div>

    
    <script type="text/javascript">
	//initialize
	jQuery.mobility.start();
	
	//config aquire
	require.config({ templates: { root: 'templates' } });
	
	//add header and footer spacing
	jQuery(window).trigger('mobility-swap-complete', function() {
		jQuery('section.screen.current').addClass('with-head with-foot');
	});
	
	//now load the home page
	jQuery.mobility.swap(jQuery('#home').html());
	
	//remote transition are pluggable in this manner
	jQuery(window).on('mobility-request', function(e, target, effect) {
		jQuery(window).one('mobility-swap-complete', function() {
			var current = jQuery('section.screen.current').addClass('loading');
			
			//remote call yes? lets use acquire!
			if(target === '/acquire') {
				require('templates/sample.html', function(html) {
					jQuery.mobility.swap(html);
				});
				
				return;
			}
			
			//Probably do Ajax instead of this
			setTimeout(function() {
				jQuery.mobility.swap(jQuery('#transition').html());
			}, 5000);
		});
		
		jQuery.mobility.swap('', 'slide-left');
	});
	
	//default refresh pagination
    var i = 0;
	jQuery(window).on('mobility-refresh', function(e, target, callback) {
		var rows = $(jQuery('#refresh-template').html());
		setTimeout(function() {
			callback(rows[(++i) % 4]);
		}, 1000);	
	});
	
	
	//default paginate pagination
	var j = 0;
	jQuery(window).on('mobility-paginate', function(e, target, callback) {
		setTimeout(function() {
			if(j === 3) {
				callback();
				jQuery('.pagi-wait').removeClass('hide');
				return;
			}
			
			callback(jQuery('#refresh-template').html());
			j++;
		}, 1000);	
	});
	
	jQuery(document).on('click', 'nav.themes a', function(e) {
		e.preventDefault();
		var color = this.innerHTML.toLowerCase();
		jQuery('<link />').attr({
			rel: 'stylesheet', 
			type: 'text/css',
			href: 'vendor/mobility/mobility-'+color+'.css' })
		.appendTo('head');
	});
    </script>
</body>
</html>
