/**
 * Mobility - Mobility is a super light weight HTML, 
 * CSS, and JS framework built on top of Bootstrap 
 * for developing mobile applications. 
 *
 * @version 1.0.1
 * @author Christian Blanquera <cblanquera@openovate.com>
 * @website https://github.com/cblanquera/mobility
 * @license MIT
 */
!function(i){i(window).on("go-click",function(n){n.preventDefault();var o=t("go-click",n.target),a=e(o);try{if(i(a).length&&i(a).html())return i.mobility.swap(i(a).html()),void(n.originalEvent.stop=!0)}catch(n){}i(window).trigger("mobility-request",[a,""])}).on("go-back-click",function(n){n.preventDefault();var o=t("go-back-click",n.target),a=e(o);try{if(i(a).length&&i(a).html())return i.mobility.swap(i(a).html(),"slide-right"),void(n.originalEvent.stop=!0)}catch(n){}i(window).trigger("mobility-request",[a,"slide-right"])}).on("go-forward-click",function(n){n.preventDefault();var o=t("go-forward-click",n.target),a=e(o);try{if(i(a).length&&i(a).html())return i.mobility.swap(i(a).html(),"slide-left"),void(n.originalEvent.stop=!0)}catch(n){}i(window).trigger("mobility-request",[a,"slide-left"])}).on("go-previous-click",function(n){n.preventDefault();var o=t("go-previous-click",n.target),a=e(o);try{if(i(a).length&&i(a).html())return i.mobility.swap(i(a).html(),"slide-up"),void(n.originalEvent.stop=!0)}catch(n){}i(window).trigger("mobility-request",[a,"slide-up"])}).on("go-next-click",function(n){n.preventDefault();var o=t("go-next-click",n.target),a=e(o);try{if(i(a).length&&i(a).html())return i.mobility.swap(i(a).html(),"slide-down"),void(n.originalEvent.stop=!0)}catch(n){}i(window).trigger("mobility-request",[a,"slide-down"])}).on("go-fade-click",function(n){n.preventDefault();var o=t("go-fade-click",n.target),a=e(o);try{if(i(a).length&&i(a).html())return i.mobility.swap(i(a).html(),"fade"),void(n.originalEvent.stop=!0)}catch(n){}i(window).trigger("mobility-request",[a,"fade"])}).on("focus-input-group-init",function(t,e){e=i(e),e.find("label").each(function(){i(this).click(function(){e.find("label input").each(function(){this.checked?i(this).parents("label:first").addClass("active"):i(this).parents("label:first").removeClass("active")})})})}).on("tab-switch-click",function(e){e.preventDefault(),e.originalEvent.stop=!0;var n=t("tab-switch-click",e.target);i.mobility.tabSwitch(n)}).on("modal-open-click",function(n){if(n.preventDefault(),n.originalEvent.stop=!0,!i.mobility.busy){var o=t("modal-open-click",n.target),a=i(e(o));i.mobility.modalOpen(a)}}).on("modal-close-click",function(n){n.preventDefault(),n.originalEvent.stop=!0;var o=t("modal-close-click",n.target),a=i(e(o));i.mobility.modalClose(a)}).on("popover-open-click",function(n){n.preventDefault(),n.originalEvent.stop=!0;var o=t("popover-open-click",n.target),a=i(e(o));i.mobility.popoverOpen(a)}).on("popover-close-click",function(n){n.preventDefault(),n.originalEvent.stop=!0;var o=t("popover-close-click",n.target),a=i(e(o));i.mobility.popoverClose(a)}).on("notify-open-click",function(e){e.preventDefault(),e.originalEvent&&(e.originalEvent.stop=!0);var n=t("notify-open-click",e.target),o=n.attr("data-message"),a=n.attr("data-type");i.mobility.notify(o,a)}).on("notify-close-click",function(n){if(n.preventDefault(),n.originalEvent&&(n.originalEvent.stop=!0),!i.mobility.busy){i.mobility.busy=!0;var o=t("notify-close-click",n.target),a=i(e(o)),s=function(){a.remove(),i.mobility.busy=!1};a[0].offsetWidth,a.one("webkitTransitionEnd",s).addClass("sliding").addClass("sliding-up")}}).on("paginate-init",function(t,e){e=i(e);var n=e.parent(),o=function(){if(!i.mobility.paginateBusy){var t=-n.height();n.children().each(function(){t+=i(this).outerHeight()}),n.scrollTop()<.75*t||(i.mobility.paginateBusy=!0,i(window).trigger("mobility-paginate",[n,function(t){return i.mobility.paginateBusy=!1,t?void("boolean"!=typeof t&&(t=i(t),e.html(e.attr("data-loading")).prev().append(t.css("opacity",0).animate({opacity:1})),t.doon())):(e.html(e.attr("data-noresults")),void n.unbind("scroll",o))}]))}};n.scroll(o)}).on("refresh-pull-init",function(t,e){e=i(e),i("span.message",e).html(e.attr("data-pull"));var n=!1,o=e.parent(),a=function(){var t=o.scrollTop();if(181>t){var n=180-t;n>180?n=180:0>n&&(n=0),i("i",e).css("transform","rotate("+n+"deg)")}},s=function(){return 0==o.scrollTop()?n?(i("span.message",e).html(e.attr("data-release")),void i(window).one("touchend",r)):void r():void 0},l=function(){i("span.message",e).html()!==e.attr("data-release")&&o.scrollTop()<180&&(i.mobility.busy=!0,o.css("-webkit-overflow-scrolling","auto"),o.animate({scrollTop:180},"fast","swing",function(){o.css("-webkit-overflow-scrolling","touch"),i.mobility.busy=!1}))},r=function(){i.mobility.refreshBusy||(i("span.message",e).html(e.attr("data-loading")),i.mobility.refreshBusy=!0,e.animate({paddingTop:0,height:50},"fast",function(){i(window).trigger("mobility-refresh",[o,function(t){t&&(t=i(t),e.next().prepend(t.css("opacity",0).animate({opacity:1})),t.doon()),e.css("padding-top","130px").css("height","180px"),i("span.message",e).html(e.attr("data-pull")),i("i",e).css("transform","rotate(0deg)"),o.scrollTop(179),setTimeout(function(){o.scrollTop(180)},5),i.mobility.refreshBusy=!1}])}))},d=function(){e.removeClass("hide"),o.scrollTop(180).on("scroll",a).on("scroll",s).on("touchend",l).on("touchstart",function(){n=!0}).on("touchend",function(){n=!1})};i.mobility.busy?i(window).one("mobility-swap-complete",d):d()}).on("hero-init",function(t,e){e=i(e);var n=function(){var t=0;i.mobility.swipe(e),e.on("swipe-left",function(){var n=i("img",e).eq(++t);return n.length?(i("div.frame",e).animate({left:-1*n.position().left}),!1):void t--}).on("swipe-right",function(){var n=i("img",e).eq(--t);return!n.length||0>t?void t++:(i("div.frame",e).animate({left:-1*n.position().left}),!1)})};return i.mobility.busy?void i(window).on("mobility-swap-complete",n):void n()}).on("aside-click",function(n){n.preventDefault(),n.originalEvent.stop=!0;var o=t("aside-click",n.target),a=e(o);return i(a).length?i(a).parent().hasClass("aside-slide-right")||i(a).parent().hasClass("aside-slide-left")?void i.mobility.asideClose(a):void i.mobility.asideOpen(a):void 0});var t=function(t,e){var n,o,a,s=null;if(e=i(e),e.attr("data-do")&&e.attr("data-on"))for(o=e.attr("data-do"),a=e.attr("data-on").split("|"),a.unshift("init"),n=0;n<a.length;n++)if(o+"-"+a[n]===t)return e;return e.parents("[data-do]").each(function(){if(s)return!1;o=i(this).attr("data-do"),a=i(this).attr("data-on").split("|"),a.unshift("init");for(var e=0;e<a.length;e++)if(o+"-"+a[e]===t)return s=i(this),!1}),s||e},e=function(t){t=i(t);var e=t.attr("data-target");return e&&e.length||(e=t.attr("href")),e},n='<div id="notify-{UID}" class="notify{TYPE}"><a data-do="notify-close" data-on="click" data-target="#notify-{UID}" href="javascript:void(0)"><i class="fa fa-times"></i></a><span class="message">{MESSAGE}</span></div>';i.extend({mobility:{busy:!1,paginateBusy:!1,refreshBusy:!1,uid:0,notify:function(t,e){switch(i("div.notify").length&&i("div.notify > a").click(),e){case"info":case"warning":case"error":case"success":e=" notify-"+e;break;default:e=""}var o=n.replace("{UID}",++this.uid).replace("{UID}",this.uid).replace("{MESSAGE}",t).replace("{TYPE}",e);o=i(o).addClass("sliding-up"),i(document.body).append(o),setTimeout(function(){o.doon().removeClass("sliding-up").addClass("sliding")},1),setTimeout(function(){o.children("a").click()},3e3)},swap:function(t,e){if(!i.mobility.busy){i.mobility.busy=!0;var n=i('<section class="screen current">').html(t),o=i("section.screen.current"),a=function(){n.unbind("webkitTransitionEnd",a).removeClass("sliding").removeClass("sliding-up").removeClass("sliding-right").removeClass("sliding-down").removeClass("sliding-left"),o.remove(),i.mobility.busy=!1,i(window).trigger("mobility-swap-complete")},s=function(){o.remove(),i.mobility.busy=!1,i(window).trigger("mobility-swap-complete")};switch(e){case"slide-left":i(document.body).append(n),n.doon().addClass("sliding-right"),n[0].offsetWidth,n.removeClass("sliding-right").on("webkitTransitionEnd",a).addClass("sliding"),o.addClass("sliding").addClass("sliding-left");break;case"slide-right":i(document.body).append(n),n.doon().addClass("sliding-left"),n[0].offsetWidth,n.removeClass("sliding-left").on("webkitTransitionEnd",a).addClass("sliding"),o.addClass("sliding").addClass("sliding-right");break;case"slide-up":i(document.body).append(n),n.doon().addClass("sliding-down"),n[0].offsetWidth,n.removeClass("sliding-down").on("webkitTransitionEnd",a).addClass("sliding"),o.addClass("sliding").addClass("sliding-up");break;case"slide-down":i(document.body).append(n),n.doon().addClass("sliding-up"),n[0].offsetWidth,n.removeClass("sliding-up").on("webkitTransitionEnd",a).addClass("sliding"),o.addClass("sliding").addClass("sliding-down");break;case"fade":i(document.body).prepend(n),n.doon(),o.on("webkitTransitionEnd",s).addClass("fade");break;default:n.appendTo(document.body).doon(),o.remove(),i.mobility.busy=!1,i(window).trigger("mobility-swap-complete")}}},modalOpen:function(t){t=i(t);var e=function(){t.unbind("webkitTransitionEnd",e).removeClass("sliding")};return t.addClass("sliding-down").removeClass("hide"),t[0].offsetWidth,t.removeClass("sliding-down").on("webkitTransitionEnd",e).addClass("sliding"),this},modalClose:function(t){t=i(t);var e=function(){t.unbind("webkitTransitionEnd",e).removeClass("sliding").removeClass("sliding-down").addClass("hide")};return t[0].offsetWidth,t.on("webkitTransitionEnd",e).addClass("sliding").addClass("sliding-down"),this},popoverOpen:function(t){return i(t).removeClass("hide"),this},popoverClose:function(t){return i(t).addClass("hide"),this},asideOpen:function(t){return t=i(t),t.hasClass("aside-right")?(t.parent().removeClass("aside-return").removeClass("aside-slide-right").addClass("aside-slide-left"),this):(t.parent().removeClass("aside-return").removeClass("aside-slide-left").addClass("aside-slide-right"),this)},asideClose:function(t){return t=i(t),t.parent().one("webkitTransitionEnd",function(){t.parent().removeClass("aside-return")}),t.parent().removeClass("aside-slide-right").removeClass("aside-slide-left").addClass("aside-return"),this},tabSwitch:function(t){var n=i(e(t));return t=i(t),t.siblings().each(function(){var t=i(this).removeClass("active").attr("href");i(t).addClass("hide")}),t.addClass("active"),n.removeClass("hide"),this},swipe:function(t,e){if(e=e||0,t=i(t),!t.data("swipe-handler")){t.data("swipe-handler",!0);var n=0;t.on("mousedown touchstart",function(i){return i.originalEvent.touches?void(n=i.originalEvent.touches[0].pageX):void(n=i.pageX)}),t.on("mousemove touchmove",function(){}),t.on("mouseup touchend touchcancel",function(i){var o;o=i.originalEvent.changedTouches?i.originalEvent.changedTouches[0].pageX-n:i.pageX-n,0>o&&Math.abs(o)>=e?t.trigger("swipe-left"):o>0&&Math.abs(o)>=e&&t.trigger("swipe-right")})}},start:function(){i(document.body).doon()},isMobile:{Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},Windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}}}})}(jQuery);